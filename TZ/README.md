<h1>Бот для импровизированного интернет магазина</h1>

Контакты: 

Telegram: @Aaaar05

vk: vk.com/and_rreeww

<h2>Как запустить:</h2>
<code>docker-compose --build</code>
этого должно быть достаточно

все переменные окружения лежат в файле .env, я оставил там всё своё чтобы можно было сразу поднять. ещё часть зависимостей лежит в docker-compose (пароль от админки admin, логин admin)

группа для подписки: https://t.me/sdagdasgsdg

сам бот на чьём токене поднимается: @testing_pet_bot
<h2>Стек:</h2>

Aiogram3 - основа для взаимодействия с Telegram API

aiogram-dialog - UI, пагинация

SQLAlchemy - ORM для бота

Django 4 - Веб-админка

PostgreSQL - база данных

Celery - брокер сообщений (использовался для передачи сообщений от django-админки к боту)

Redis - вспомогательное хранилище для Celery

Docker - Dockerfile для сборки приложения в корневой директории

Docker-Compose - оркестрация собранного контейнера и контейнеров PostgreSQL, Redis, Celery

pandas, openpyxl - для работы с эксель табличкой

<h2>Техническое задание:</h2>

Само задание - тг бот с основными функциями, которые нужно понимать как правильно реализовывать

Дополнение

Для реализации бота следует применять библиотеку Aiogram-3. Графический интерфейс админ-панели Django и бот должны быть оформлены как два отдельных проекта, взаимодействующих через посредство базы данных, что не требует обязательной реализации API.

В качестве основной СУБД выбран PostgreSQL. При этом важно, чтобы все запросы к базе данных осуществлялись асинхронно. Это можно осуществить с применением ORM-фреймворка Django.

Для запуска и сборки проекта используется Docker. Проект должен предусматривать ведение логов и их сохранение на сервере для возможности последующего их анализа.

Также обязательно использование файла .env для хранения и управления переменными окружения. Это повышает уровень безопасности проекта, исключая прямое введение чувствительных данных в код программы.

<h2>Как работает?</h2>

Навигация как в ТЗ<img width="2117" alt="Тестовое задание" src="https://github.com/user-attachments/assets/485ced18-3173-4626-a5ef-5e440300cec6" />

FAQ через инлайн режим + кнопками с пагинацией.

Платёжка тестовая юкассы, тест. карта 5555555555554444 и любые даты и cvv

при запуске /start юзер добавляется в список клиентов. Проверка подписки осуществляется через миддлварь subscribe. рассылка в админке через actions у модели Пользователи. Текст для рассылки лежит переменной в коде, так же рассылка поддерживает url-кнопки. работает через фоновые таски Celery.

со стороны бота с бд Postgres работает SQLAlchemy, а с джанги её модели. миграции джанги подходят под обе ORM.

При запуске приложения автоматически создаётся админ и проводятся миграции. БД пустые и готовые к работе

В папке бота (app/bot) лежит папка photos, где хранятся фото ассортимента по некоторым заранее заготовленным категориям. в папке photos/Смартфоны/Apple/ лежат 2 фотографии для создания тестовых товаров. модель берет фотографию по photo_id, которое обозначает имя файла в соответствующей товару категории и подкатегории.

Для теста платёжки и навигации по товарам через админку можно создать 

1. Категория Смартфоны

2. Подкатегория Apple

3. Товар с этой категорией и подкатегорией, любые поля описания и цены, и в поле photo_id указать 14.jpg или 16_pro_max.png (эти фотографии уже лежат в файлах)

после создания заказа обновляется табличка Orders и excel файл Orders.xlsx. 

Orders.xlsx в корневой директории забинджена через bind mount с внутренней таблицей бота, они синхронизируются.

